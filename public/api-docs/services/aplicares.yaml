openapi: 3.0.0
info:
  title: Aplicares API
  version: 1.0.0
  description: Layanan Aplicares untuk manajemen aplikasi dan ketersediaan kamar

servers:
  - url: http://localhost:3001/api/bpjs/aplicares
    description: Proxy Backend Local

tags:
  - name: Ketersediaan Kamar
    description: Endpoint untuk manajemen ketersediaan kamar rumah sakit

paths:
  /aplicaresws/rest/ref/kelas:
    get:
      tags:
        - Ketersediaan Kamar
      summary: Referensi Kamar
      description: Mendapatkan referensi kelas kamar
      operationId: getRefKelas
      parameters:
        - name: x-cons-id
          in: header
          required: true
          schema:
            type: string
          description: Consumer ID dari BPJS Kesehatan
        - name: x-timestamp
          in: header
          required: true
          schema:
            type: string
          description: Generated unix-based timestamp
        - name: x-signature
          in: header
          required: true
          schema:
            type: string
          description: Generated signature dengan pola HMAC-256
        - name: user_key
          in: header
          required: true
          schema:
            type: string
          description: User key untuk akses webservice
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  metadata:
                    type: object
                    properties:
                      code:
                        type: integer
                        example: 1
                      message:
                        type: string
                        example: "OK"
                      totalitems:
                        type: integer
                        example: 16
                  response:
                    type: object
                    properties:
                      list:
                        type: array
                        items:
                          type: object
                          properties:
                            kodekelas:
                              type: string
                              example: "NON"
                            namakelas:
                              type: string
                              example: "-"
              example:
                metadata:
                  code: 1
                  message: "OK"
                  totalitems: 16
                response:
                  list:
                    - kodekelas: "NON"
                      namakelas: "-"
                    - kodekelas: "VVP"
                      namakelas: "VVIP"

  /aplicaresws/rest/bed/update/{kodeppk}:
    post:
      tags:
        - Ketersediaan Kamar
      summary: Update Ketersediaan Tempat Tidur
      description: Update ketersediaan tempat tidur untuk rumah sakit
      operationId: updateBedAvailability
      parameters:
        - name: kodeppk
          in: path
          required: true
          schema:
            type: string
          description: Kode PPK rumah sakit
        - name: x-cons-id
          in: header
          required: true
          schema:
            type: string
          description: Consumer ID dari BPJS Kesehatan
        - name: x-timestamp
          in: header
          required: true
          schema:
            type: string
          description: Generated unix-based timestamp
        - name: x-signature
          in: header
          required: true
          schema:
            type: string
          description: Generated signature dengan pola HMAC-256
        - name: user_key
          in: header
          required: true
          schema:
            type: string
          description: User key untuk akses webservice
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - kodekelas
                - koderuang
                - namaruang
                - kapasitas
                - tersedia
              properties:
                kodekelas:
                  type: string
                  description: Kode kelas ruang rawat sesuai dengan mapping BPJS Kesehatan
                  example: "VIP"
                koderuang:
                  type: string
                  description: Kode ruangan Rumah Sakit
                  example: "RG01"
                namaruang:
                  type: string
                  description: Nama ruang rawat Rumah Sakit
                  example: "Ruang Anggrek VIP"
                kapasitas:
                  type: string
                  description: Kapasitas ruang Rumah Sakit
                  example: "20"
                tersedia:
                  type: string
                  description: Jumlah tempat tidur yang kosong
                  example: "10"
                tersediapria:
                  type: string
                  description: Jumlah tempat tidur kosong untuk laki-laki
                  example: "0"
                tersediawanita:
                  type: string
                  description: Jumlah tempat tidur kosong untuk perempuan
                  example: "0"
                tersediapriawanita:
                  type: string
                  description: Jumlah tempat tidur kosong untuk laki-laki atau perempuan
                  example: "0"
            example:
              kodekelas: "VIP"
              koderuang: "RG01"
              namaruang: "Ruang Anggrek VIP"
              kapasitas: "20"
              tersedia: "10"
              tersediapria: "0"
              tersediawanita: "0"
              tersediapriawanita: "0"
      responses:
        '200':
          description: Update berhasil
        '400':
          description: Bad Request
        '500':
          description: Internal Server Error

  /aplicaresws/rest/bed/create/{kodeppk}:
    post:
      tags:
        - Ketersediaan Kamar
      summary: Ruangan Baru
      description: Insert ruangan baru
      operationId: createBed
      parameters:
        - name: kodeppk
          in: path
          required: true
          schema:
            type: string
          description: Kode PPK rumah sakit
        - name: x-cons-id
          in: header
          required: true
          schema:
            type: string
          description: Consumer ID dari BPJS Kesehatan
        - name: x-timestamp
          in: header
          required: true
          schema:
            type: string
          description: Generated unix-based timestamp
        - name: x-signature
          in: header
          required: true
          schema:
            type: string
          description: Generated signature dengan pola HMAC-256
        - name: user_key
          in: header
          required: true
          schema:
            type: string
          description: User key untuk akses webservice
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - kodekelas
                - koderuang
                - namaruang
                - kapasitas
                - tersedia
              properties:
                kodekelas:
                  type: string
                  description: Kode kelas ruang rawat sesuai dengan mapping BPJS Kesehatan
                  example: "VIP"
                koderuang:
                  type: string
                  description: Kode ruangan Rumah Sakit
                  example: "RG01"
                namaruang:
                  type: string
                  description: Nama ruang rawat Rumah Sakit
                  example: "Ruang Anggrek VIP"
                kapasitas:
                  type: string
                  description: Kapasitas ruang Rumah Sakit
                  example: "20"
                tersedia:
                  type: string
                  description: Jumlah tempat tidur yang kosong
                  example: "10"
                tersediapria:
                  type: string
                  description: Jumlah tempat tidur kosong untuk laki-laki
                  example: "0"
                tersediawanita:
                  type: string
                  description: Jumlah tempat tidur kosong untuk perempuan
                  example: "0"
                tersediapriawanita:
                  type: string
                  description: Jumlah tempat tidur kosong untuk laki-laki atau perempuan
                  example: "0"
            example:
              kodekelas: "VIP"
              koderuang: "RG01"
              namaruang: "Ruang Anggrek VIP"
              kapasitas: "20"
              tersedia: "10"
              tersediapria: "0"
              tersediawanita: "0"
              tersediapriawanita: "0"
      responses:
        '201':
          description: Ruangan berhasil dibuat
        '400':
          description: Bad Request
        '500':
          description: Internal Server Error

  /aplicaresws/rest/bed/read/{kodeppk}/{start}/{limit}:
    get:
      tags:
        - Ketersediaan Kamar
      summary: Ketersediaan Kamar RS
      description: Melihat data ketersediaan kamar rumah sakit
      operationId: readBedAvailability
      parameters:
        - name: kodeppk
          in: path
          required: true
          schema:
            type: string
          description: Kode PPK rumah sakit
        - name: start
          in: path
          required: true
          schema:
            type: integer
            minimum: 1
          description: Nomor baris awal (dimulai dari 1)
          example: 1
        - name: limit
          in: path
          required: true
          schema:
            type: integer
            minimum: 1
          description: Jumlah data yang ditampilkan
          example: 10
        - name: x-cons-id
          in: header
          required: true
          schema:
            type: string
          description: Consumer ID dari BPJS Kesehatan
        - name: x-timestamp
          in: header
          required: true
          schema:
            type: string
          description: Generated unix-based timestamp
        - name: x-signature
          in: header
          required: true
          schema:
            type: string
          description: Generated signature dengan pola HMAC-256
        - name: user_key
          in: header
          required: true
          schema:
            type: string
          description: User key untuk akses webservice
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  metadata:
                    type: object
                    properties:
                      code:
                        type: integer
                      message:
                        type: string
                      totalitems:
                        type: integer
                  response:
                    type: object
                    properties:
                      list:
                        type: array
                        items:
                          type: object
                          properties:
                            kodekelas:
                              type: string
                            koderuang:
                              type: string
                            namaruang:
                              type: string
                            kapasitas:
                              type: string
                            tersedia:
                              type: string
                            tersediapria:
                              type: string
                            tersediawanita:
                              type: string
                            tersediapriawanita:
                              type: string
        '400':
          description: Bad Request
        '500':
          description: Internal Server Error

  /aplicaresws/rest/bed/delete/{kodeppk}:
    post:
      tags:
        - Ketersediaan Kamar
      summary: Hapus Ruangan
      description: Hapus ruangan dari sistem
      operationId: deleteBed
      parameters:
        - name: kodeppk
          in: path
          required: true
          schema:
            type: string
          description: Kode PPK rumah sakit
        - name: x-cons-id
          in: header
          required: true
          schema:
            type: string
          description: Consumer ID dari BPJS Kesehatan
        - name: x-timestamp
          in: header
          required: true
          schema:
            type: string
          description: Generated unix-based timestamp
        - name: x-signature
          in: header
          required: true
          schema:
            type: string
          description: Generated signature dengan pola HMAC-256
        - name: user_key
          in: header
          required: true
          schema:
            type: string
          description: User key untuk akses webservice
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - kodekelas
                - koderuang
              properties:
                kodekelas:
                  type: string
                  description: Kode kelas ruang rawat sesuai dengan mapping BPJS Kesehatan
                  example: "VIP"
                koderuang:
                  type: string
                  description: Kode ruangan Rumah Sakit
                  example: "RG01"
            example:
              kodekelas: "VIP"
              koderuang: "RG01"
      responses:
        '200':
          description: Ruangan berhasil dihapus
        '400':
          description: Bad Request
        '404':
          description: Ruangan tidak ditemukan
        '500':
          description: Internal Server Error

components:
  schemas:
    BedAvailability:
      type: object
      required:
        - kodekelas
        - koderuang
        - namaruang
        - kapasitas
        - tersedia
      properties:
        kodekelas:
          type: string
          description: Kode kelas ruang rawat
        koderuang:
          type: string
          description: Kode ruangan
        namaruang:
          type: string
          description: Nama ruang rawat
        kapasitas:
          type: string
          description: Kapasitas ruang
        tersedia:
          type: string
          description: Jumlah tempat tidur kosong
        tersediapria:
          type: string
          description: Jumlah tempat tidur kosong untuk laki-laki
        tersediawanita:
          type: string
          description: Jumlah tempat tidur kosong untuk perempuan
        tersediapriawanita:
          type: string
          description: Jumlah tempat tidur kosong untuk laki-laki atau perempuan

    KelasReference:
      type: object
      properties:
        kodekelas:
          type: string
          description: Kode kelas
        namakelas:
          type: string
          description: Nama kelas
